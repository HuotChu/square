<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>SquareJS Button Demo</title>

    <link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="button-demo"></div>
<div id="tutorial">
    <h1>Square[JS] "Buttons" Demo & Tutorial</h1>
    <p id="author">by Scott Bishop</p>
    <hr />
    <h2>Overview</h2>
    <hr />
    <p class="content">
        There should be five buttons in the upper-left portion of your screen with the labels <b>Galaxy</b>, <b>Nexus</b>, <b>Lenovo</b>, <b>Apple</b>, and <b>Sony</b>.
        There could easily be more or less of these buttons on the screen, because the Square templating engine, temple.js, is creating one button for each `product object` in the database.
        There's more than templating going on here, though. Box (box.js) has dynamically assigned event handlers to each of those buttons. Here's where it
        gets <i>really</i> cool; two things... First, Box keeps track of all those button DOM nodes and it does so during DOM creation of the nodes, so it's fast.
        The framework never has to search through the entire DOM to find and cache the nodes and you will never trigger a DOM search since the nodes are all properties
        of the Box object. Neat, but the other thing that happens here is even better. When a user clicks the button, a query is automatically triggered against the model
        to look up the data being requested by the button push. In this case, when I push a button, I want to know what the description text is that matches the button.
        Ok, so you push the button and the model replies with the response data, big deal, right? Actually, it is a big deal. The model may respond with the data, but the
        button doesn't care about that. Why should it, it's just a button! Hidden away until needed, there is a `description` div element on the page. If you click a button
        the div will appear with the correct description on it. Box hooked that div element up to the eventHub, so when each read against the description data throws a JavaScript
        event, the div is listening for it and updates itself! That's great, because the description div is what cares about the data. This mechanism is how one and two way data
        binding are achieved in Square without the need for loops or pub/sub.
    </p>
    <p class="content">
        Now that we understand what the demo is doing, let's look at how to build it using the Square framework and Require.js
     </p>
    <p class="content">
        The file structure is shown in the following image. At the root of the project, there are four files: app.js, index.html, overlay.png, and style.css.
        There is also a sub-directory called `product`, which contains: product.html, productBox.js, and productModel.js. For this tutorial, we don't care much about overlay.png or
        style.css as these files are simply used to make things look nice. Also, note the SquareJS directory is not shown. This will be discussed in the index.html breakdown.
    </p>
        <div>
            <img src="../demo_1_directories.png" alt="button demo directory structure" />
        </div>
    <hr />
    <h2>Configuration</h2>
    <hr />
    <p class="content">
        The starting point for this app is index.html. This is where the framework and application are configured prior to initializing the app. Moving from top to bottom within the BODY of this file,
        there are three items on the page which are used to prepare the app before it runs.
    </p>
    <div class="codeBlock">
        <h3>Index.html</h3>
        <p>
            This element will be used to attach the view to the DOM when the view is ready.
        </p>
        <p class="code">
            &lt;div id="button-demo"&gt;&lt;/div&gt;
        </p>

        <p>
            Include require.js which is used to load all the modules. The relative path shows require is located outside the main application directory. This is purely a matter of preference.
            You may place require and square in locations that best suite your project.
        </p>
        <p class="code">
            &lt;script src="../../lib/require.js"&gt;&lt;/script&gt;
        </p>

        <p>
            A require.js configuration block must be included before the app runs.
            <br /><br />
            <b>baseUrl</b> <i>string</i> sets the base directory of the application relative to this file.
            <br /><br />
            <b>paths</b> <i>object</i> maps all the SquareJS modules to module names, so the app will know where to find them.
            <br /><br />
            <b>deps</b> <i>array</i> contains application dependencies, so app.js is passed in as `app`. When app.js has finished loading, the app
            module is passed in to the `callback` function where we call the app.js 'startup' method and get things moving.
        </p>
        <p class="code">
                &lt;script&gt;<br />
                &nbsp;&nbsp;&nbsp;require.config({<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseUrl: './',<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paths: {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"box": "../../lib/box",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"db": "../../lib/squaredb/squaredb",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"eventHub": "../../lib/eventHub",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"notify": "../../lib/notify",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"request": "../../lib/request",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"square": "../../lib/square",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"aggregates": "../../lib/squaredb/aggregates",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"comparator":  "../../lib/squaredb/comparator",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Select":  "../../lib/squaredb/Select",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"go": "../../lib/squaredb/go",<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"temple": "../../lib/temple"<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps: ['app'],<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback: function (app) {<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.startup();<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
                &nbsp;&nbsp;&nbsp;});<br />
                &lt;/script&gt;
        </p>
    </div>
    <hr />
    <h2>Getting Things Started</h2>
    <hr />
    <p class="content">
        When index.html finished loading, it called the app.js `startup` method. This is where the application is initialized. Application specific setup
        code and module pre-loading can happen here (bootstrapping) if your project needs all that. For this example, though, the need
        is pretty simple, "create a view with some buttons and a description banner, then put that view on the page". Let's look at how to
        accomplish that using the Square framework.
    </p>
    <div class="codeBlock">
        <h3>app.js</h3>
        <p>
            The first line of code inside app.js <b>define</b>s the `app` module based on the file name, then it imports the view. That view is aliased
            and cached inside the <b>productView</b> argument which we can attach to the page <i>when the view is ready</i>. Details about how
            productBox.js creates the view will appear later in the tutorial.
        </p>
        <p class="code">
            define(['product/productBox'], function (productView) {
        </p>
    </div>

    <p>
        <i>To be continued...</i>
    </p>
</div>
    <script src="../../lib/require.js"></script>
    <script>
        require.config({
            baseUrl: './',
            paths: {
                "box": "../../lib/box",
                "db": "../../lib/squaredb/squaredb",
                "eventHub": "../../lib/eventHub",
                "notify": "../../lib/notify",
                "request": "../../lib/request",
                "square": "../../lib/square",
                "aggregates": "../../lib/squaredb/aggregates",
                "comparator":  "../../lib/squaredb/comparator",
                "Select":  "../../lib/squaredb/Select",
                "go": "../../lib/squaredb/go",
                "temple": "../../lib/temple"
            },
            deps: ['app'],
            callback: function (app) {
                app.startup();
            }
        });
    </script>
</body>
</html>