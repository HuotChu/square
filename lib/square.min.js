var square=function(){"use strict";String.prototype.trim=function(){return this.replace(/^\s|\s$/g,"")},function(){var a=window.chrome,b=window.navigator.vendor,c=window.navigator.userAgent.indexOf("OPR")>-1,d=window.navigator.userAgent.indexOf("Edge")>-1;null!==a&&void 0!==a&&"Google Inc."===b&&0==c&&0==d||(Array.prototype.indexOf=function(a){var b=0,c=this.length;for(b;c>b;++b)if(this[b]===a)return b;return-1})}(),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a){var b,c,d,e,f,g,h,i;if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(i=Object(a),b=1,c=arguments.length;c>b;++b)if(e=arguments[b],void 0!==e&&null!==e)for(e=Object(e),d=Object.keys(e),f=0,c=d.length;c>f;++f)g=d[f],h=Object.getOwnPropertyDescriptor(e,g),void 0!==h&&h.enumerable&&(i[g]=e[g]);return i}});var a=function(a,b){return a=decodeURI(a),new Promise(function(c,d){var e=new XMLHttpRequest,f=a.indexOf("?"),g=0>f?a.length:f,h=a.slice(0,g),i=a.slice(g+1).split("&");e.open(b?"POST":"GET",h),b&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){var a,b,f,g,h=0;if(e.response){if(i.length)for(e.uriArgs={},a=i.length,h;a>h;++h)g=i[h].split("="),b=g[0],f=g[1],e.uriArgs[b]=f;c(e)}else d(Error(e.statusText))},e.onerror=function(){d(Error("Network Error"))},e.send(b?i:null)})},b=function(){var a=/\{\{([\w\-\.]*)\}\}/gim,b=/\{\{\+([\w\-\.]+)\}\}/gim,c=/<\s*(\w+)[^>]+data-template="([^"]+)"(?:[^\/]*>.*[\r\n\w\W]*?<\s*\/\s*\1\s*>|\s*\/\s*>)/gim,d={},e=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},f=function(a,c){var d,e="",f=0,g=c.getAttribute("data-repeat-count"),h=c.getAttribute("data-repeat"),i=(a=a[h])?a.length||g:0,j=function(a,b){return this[b]};for(f;i>f;++f)d=a[f],e+=c.outerHTML.replace(b,j.bind(d));return e=e.replace(/\sdata-repeat="\w+"/gi,""),g&&(e=e.replace(/\sdata-repeat-count="\d+"/gi,"")),c.parentNode.innerHTML?c.parentNode.innerHTML=e:(c.parentNode.childNodes[0].innerHTML=e,c=c.parentNode.childNodes[0]),c},g=function(a){for(var b,c=a.attributes,d=0,e=c.length,f=[];e>d;++d)b=c[d],0===b.nodeName.indexOf("data-event-args-")&&f.push(b.value);return f},h=function(b){return k(b.template,!0).then(function(d){d.replace(c,function(a,c,d){a=a.replace(/\{\{\+/g,"{{"),a=a.replace(/\sdata-repeat="\w+"/gi,""),b.templates[d]=a.replace(/\sdata-template="[\w\-_]+"/gi,"")});var h,i,j,k,l,m,n,o,p,q,r,s,t=d.replace(a,function(a,c){for(var d=c.split("."),e=d.shift(),f=d.length,g=b.data,h=g?g[e]:"";f>0;)e=d.shift(),f=d.length,h=h[e];return h instanceof Function&&(h=h.call(g)),"undefined"!==h?h:""}),u=b.model,v=[];for(t=e(t),b.appendChild(t),t=b.firstChild,l=t.querySelectorAll("[data-repeat]"),0===l.length&&(l=t.getAttribute("data-repeat")?[t]:[]),h=0,i=l.length;i>h;++h)m=l[h],f(b.data,m);for(n=t.querySelectorAll("[data-index]"),h=0,i=n.length;i>h;++h)p=n[h],b.index[p.getAttribute("data-index")]=p;for(q=b.domEvents,h=0,i=q.length;i>h;++h)if(r=q[h],r.id)for(r.id=r.id.replace(/^_/,""),o=t.querySelectorAll("[data-index="+r.id+"]"),o.length||(o=t.querySelectorAll("[data-index^=_"+r.id+"]")),j=0,k=o.length;k>j;++j)p=o[j],p&&(s={},s.args=g(p),s.event=r.event,s.context=r.context,s.callback=r.callback,v.push(s),p.addEventListener(s.event,function(){var a=this.handler,b=Array.from(a.args);return b.push(this.node),b.push(this.box),a.callback.apply(a.context||null,b)}.bind({handler:s,node:p,box:b})));else v.push(r);if(b.domEvents=Array.from(v),v=[],u.addListener){for(q=b.modelEvents,h=0,i=q.length;i>h;++h)if(r=q[h],r.id)for(r.id=r.id.replace(/^_/,""),o=t.querySelectorAll("[data-index="+r.id+"]"),o.length||(o=t.querySelectorAll("[data-index^=_"+r.id+"]")),j=0,k=o.length;k>j;++j)p=o[j],p&&(s={},s.args=g(p),s.event=r.event,s.context=r.context,s.callback=r.callback,v.push(s),u.addListener(s.event,function(a){var b=this.handler,c=Array.from(b.args);return c.push(a),c.push(this.node),c.push(this.box),b.callback.apply(b.context||null,c)}.bind({handler:s,node:p,box:b}),p));else v.push(r);b.modelEvents=Array.from(v)}return t.box=b,b.destination&&b.destination.appendChild(b),b})},i=function(a,b){d[a]=b},j=function(a){return d[a]},k=function(a,b){return a=decodeURI(a),new Promise(function(c,d){var e,f=new XMLHttpRequest,g=a.indexOf("?"),h=0>g?a.length:g,k=a.slice(0,h),l=k.replace(/\/|\./g,"");return-1!==a.indexOf("<")?void c(a):b&&(e=j(l))?void c(e):(f.open("GET",k),f.onload=function(){var a=f.response;a?(b&&i(l,a),c(a)):d(Error(f.statusText))},f.onerror=function(){d(Error("Network Error"))},void f.send())})};return{build:h}}(),c=function(){var a=function(c,d){var e=d||document.createDocumentFragment(),f=c.data||e.data||[],g=c.model||e.model||[],h=c.target||e.target||"",i=c.template||e.template||"",j=c.templates||e.templates,k=c.domEvents||e.domEvents,l=c.modelEvents||e.modelEvents;return e.data=f,e.model=g,e.destination=h,e.index=e.index||{},e.template=i,e.templates=j||{},e.domEvents=k||[],e.modelEvents=l||[],e.vanish=function(){},e.shed=function(){},e.build=function(c,d){var e=a(c,d);return b.build(e)},e.parse=function(a){return b.build(a||this).outerHTML},e};return function(c){var d=a(c);this.__proto__={view:b.build(d)},this.prototype||Object.defineProperty(this,"prototype",{enumerable:!1,configurable:!1,value:this.__proto__})}}(),d=function(){var a=function(){return document.createElement("object")},b=function(a,b,d,e){return new CustomEvent(a,{cancelable:!!d,detail:e?c(b):b})},c=function(a){var b,c,d={__exposedProps__:{}};for(c in a)a.hasOwnProperty(c)&&(b=a[c],d[c]=b,d.__exposedProps__[c]=b);return d},d={},e={},f=function(a,c,d,e,f){var g=this.eventNode,h="",i=a.replace(/(\.\w{4,6})$/i,function(a,b){return h=b,""}),j=function(){g.dispatchEvent(b(i+h,c,e,f)),".read"!==h?g.dispatchEvent(b(i+".change",c,e,f)):g.dispatchEvent(b(i+".all",c,e,f))};if(c=c||{},c.origin=a,j(),d!==!1)for(;;){if(i=i.split("."),c.lastNode=i.pop(),!i.length)break;i=i.join("."),j()}return!0},g=function(a,b,c){var d,e=this.watchers,f=e[a];return c&&(b=b.bind(c)),f||(f=e[a]=[]),d=this.eventNode.addEventListener(a,b,!1),f.push(d),d},h=function(a){return this.eventNode.removeEventListener(a)},i=function(a){var b,c,d=a.event,e=this.watchers,f=e[d],g=0;if(d&&f){for(c=f.length;c>g;++g)b=f[g],this.removeListener(b);e[d]=null,delete e[d]}},j=function(b){var c,d=b.__proto__;return c=Object.create(d),Object.assign(c.__proto__,k),c.__proto__.eventNode=a(),c},k={connect:j,callBacks:e,watchers:d,dispatch:f,addListener:g,removeListener:h,garbageCollect:i};return k}(),e=function(){var a=window.localStorage,b=function(b){var c;try{c=JSON.stringify(b),c&&a.setItem(b._event,c)}catch(d){console.log(d)}},c=function(b){a.removeItem(b)},d=function(a,c){var d,e={version:c||1};Object.defineProperty(e,"_event",{enumerable:!1,value:a._event});for(d in a)a.hasOwnProperty(d)&&b(a[d]);b(e)},e=function(b){var c,d={},e=new RegExp("^"+b+"\\.[\\w\\-_\\.]+");d[b]={},d=d[b];for(c in a)a.hasOwnProperty(c)&&e.test(c)&&(d[c]=JSON.parse(a[c]));return this.restore?this.restore(d,b):d},f=function(a){var b,c=a.__proto__,d=function(){b.addListener(b._event+".change",function(a){var c=a.detail.origin,d=new RegExp("^"+b._event+"\\.([^\\.]+)","i"),e=c.match(d);e=e&&e[1],e&&"string"==typeof e&&/create|read|update|delete/.test(e)===!1&&b.putLocal(b[e])},b)},e="",f=new Promise(function(a){e=a});return b=Object.create(c),Object.assign(b.__proto__,j),b.__proto__.enableEvents=e,b.dispatch&&f.then(function(){d()}),b},g=function(b){var c=a.getItem(b);return c&&(c=JSON.parse(c)),c},h=function(){return a.clear(),a},i=function(a,b){var c=g(a);return c&&c.version===b},j={connect:f,isCurrent:i,clearLocal:h,getLocal:g,putLocal:b,persist:d,removeLocal:c,sync:e};return j}(),f=function(){var a=function(a,b){return this.__proto__={_db:a,_event:a._event+"."+b,constructor:this,columns:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&b.push(a);return b},count:function(){var a=this.indices().length,b=this._db;return b.dispatch&&b.dispatch(this._event+".count.read",{value:a}),a},indices:function(){var a,b,c,d=[],e=0;for(b in this)if(this.hasOwnProperty(b)){for(a=this[b],c=a.length;c>e;++e)null!==a[e]&&d.push(e);return d}return d},holes:function(){var a,b,c,d=[],e=0;for(b in this)if(this.hasOwnProperty(b)){for(a=this[b],c=a.length;c>e;++e)null===a[e]&&d.push(e);return d}return d}},this.prototype||Object.defineProperty(this,"prototype",{enumerable:!1,configurable:!1,value:this.__proto__}),this},b=function(a,b){return this.__proto__={_event:a&&b&&a._event+"."+b,_db:a&&a._db,_table:a,push:function(a){var b=this._db,c=Array.prototype.push.call(this,a);return b.dispatch&&(b.dispatch(this._event+".create",{value:a,index:this.length-1}),this._table.count()),c},insert:function(a,b){var c=this._db;this[b]=a,c.dispatch&&c.dispatch(this._event+"."+b+".update",{value:a,index:b})}},this.prototype||(Object.defineProperty(this,"prototype",{enumerable:!1,configurable:!1,value:this.__proto__}),this.prototype.__proto__=Array.prototype),this},c={},d=function(){var a=Array.from(arguments);return 1===a.length&&(a=a[0],-1!==a.indexOf(",")&&(a=a.split(",").map(function(a){return a.trim()})),a instanceof Array==!1&&(a=[a])),a},e=function(a,b,c,d){this.validIndices=h(a[b],c,d),this.AND=this.and=function(b,c,d){var e=h(a[b],c,d);return this.validIndices=this.validIndices.filter(function(a){return-1!==e.indexOf(a)}),this},this.OR=this.or=function(b,c,d){var e=[];return this.validIndices=this.validIndices.concat(h(a[b],c,d)),this.validIndices=this.validIndices.filter(function(a){return-1===e.indexOf(a)?(e.push(a),!0):void 0}),this}};c.__proto__={create:function(a){var b=new f(a);return this[a]=b,b},drop:function(a){return this[a]?(this[a]=null,delete this[a],!0):!1},get:function(a){return this[a]},show:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&b.push(a);return b}};var f=function(c){return this.__proto__={_event:c,_tableCount:0,count:function(){var a=this._tableCount;return this.dispatch&&this.dispatch(this._event+".count.read",{value:a}),a},COUNT:function(){return this.count.call(this)},select:function(){var a=d.apply(null,arguments);return new j(this,a)},SELECT:function(){return this.select.apply(this,arguments)},createTable:function(b){var c=this,e=new a(c,b);return c[b]=e,c.dispatch&&c.dispatch(this._event+".create",{value:e}),++this._tableCount,this.count(),function(){var a=d.apply({},arguments);return a.length&&c.alterTable(b).add.apply({},arguments),e}},CREATE_TABLE:function(a){return this.createTable.call(this,a)},alterTable:function(a){var c=this[a];return{add:function(){var a,e,f=d.apply(null,arguments),g=0,h=f.length,i=c.indices(),j=c.holes(),k=0,l=i.length,m=c._db;for(g;h>g;++g){for(a=f[g],e=c[a]=new b(c,a),k=0;l>k;++k)e.insert(void 0,i[k]);for(l=j.length,k=0;l>k;++k)e.insert(null,j[k]);m.dispatch&&m.dispatch(c._event+".create",{value:e})}return c},ADD:function(){return this.add.apply(this,arguments)},drop:function(){var a,b,e=d.apply(null,arguments),f=0,g=c._db;for((0===e.length||"*"===e[0])&&(e=c.columns()),b=e.length;b>f;++f)a=e[f],c[a]=null,delete c[a],g.dispatch&&g.dispatch(c._event+".delete",{value:a});return c},DROP:function(){return this.drop.apply(this,arguments)},modify:function(){}}},ALTER_TABLE:function(a){return this.alterTable.call(this,a)},insertInto:function(a){var b=this[a];return function(){var a=d.apply({},arguments),c=function(){var d,e,f,g=Array.from(arguments),h=0,i=a.length;for(h;i>h;++h)e=a[h],f=g[h],d=b[e],d.push(f);for(e in b)b.hasOwnProperty(e)&&-1===a.indexOf(e)&&b[e].push(void 0);return c};return{values:c,VALUES:c}}},INSERT_INTO:function(a){return this.insertInto.call(this,a)},insertJsonInto:function(a){var b=this[a],c=this;return function(a){var d,e,f,g,h,i=0,j=a.length,k=b._event.substr(b._event.indexOf(".")+1),l=c.insertInto(k);for(i;j>i;++i){e=a[i],f=[],h=[];for(d in e)e.hasOwnProperty(d)&&(b[d]||c.alterTable(k).add(d),f.push(d),h.push(e[d]));g=l.apply(null,f),g.values.apply(null,h)}}},INSERT_JSON_INTO:function(a){this.insertJsonInto.call(this,a)},update:function(a){var b=this[a],c=b._db,d={},f=function(a,b){return d[a]=b,f};return f.WHERE=f.where=function(a,f,g){var h=new e(b,a,f,g);return h.GO=h.go=function(){var a,e,f,g=0,h=this.validIndices.length,i=".update";for(g;h>g;++g){a=this.validIndices[g];for(e in b)b.hasOwnProperty(e)&&d[e]&&(f=d[e],b[e][a]=f,c.dispatch&&(null===f&&(i=".delete"),c.dispatch(b._event+"."+e+i,{value:f,index:a})))}return!0},h},{set:f,SET:f}},UPDATE:function(a){return this.update.call(this,a)},"delete":function(){var a,b=d.apply({},arguments),c=this,f=function(d){return a=c[d],(0===b.length||"*"===b[0])&&(b=a.columns()),{where:h,WHERE:h,go:g,GO:g}},g=function(){var d,e,f,g,h=this.validIndices,i=0,j=b.length;for(void 0===h&&(h=a.indices()),d=h.length;d>i;++i)for(e=h[i],f=0;j>f;++f)g=a[b[f]],g.insert(null,e),c.dispatch&&(c.dispatch(g._event+"."+e+".delete",{value:null,index:e}),--a._tableCount,a.count());return!0},h=function(b,c,d){var f=new e(a,b,c,d);return f.GO=f.go=g.bind(f),f};return{from:f,FROM:f}},DELETE:function(){return this["delete"].apply(this,arguments)},createUnique:function(){for(var a,b,c=(new Date).getTime().toString().split(""),d=["a","b","c","d","e","f","g","h","i","j"],e=0,f=c.length,g=[];f>e;++e)a=c[e],b=d[a],e%2===0?(e%8===4&&(b=b.toUpperCase()),g.push(b)):g.push(a);return g=g.map(function(a){switch(a){case"0":return"O";case"1":return"I";case"2":return"R";case"3":return"E";case"4":return"F";case"5":return"S";case"6":return"b";case"7":return"L";case"8":return"B";case"9":return"q";default:return a}}),g.join("")},restore:function(a,b){var c,d,e,f,g,h,i,j="",k=new RegExp(b+"\\.(.+)");for(e in a)if(a.hasOwnProperty(e))for(j=e.match(k)[1],g=a[e],h=Object.keys(a[e]),this.createTable(j)(h),d=g[h[0]].length,f=this.insertInto(j)(h),c=0;d>c;++c)i=[],h.forEach(function(a){i.push(g[a][c])}),f.values.apply(this,i)}},this.prototype||Object.defineProperty(this,"prototype",{enumerable:!1,configurable:!1,value:this.__proto__}),this};return{createDB:c.create,CREATE_DATABASE:c.create,dropDB:c.drop,DROP_DATABASE:c.drop,use:c.get,USE:c.get,show:c.show,SHOW_DATABASES:c.show}}(),g=function(){return function(a,b,c){var d,e,f,g=a[c],i=[],j=g.length;for(d in a)a.hasOwnProperty(d)&&i.push(d);if(e=g.reduce(function(a,c){var d;return"min"===b?d=c>a?a:c:"max"===b?d=a>c?a:c:("sum"===b||"avg"===b)&&(d=a+c),d}),"avg"===b)e/=j;else if("count"===b)return e=j*i.length,a={QUERY_COUNT:[e]};return i.length>1&&(f=h(a[c],"===",e),i.forEach(function(b){b!==c&&(d=a[b],a[b]=d.filter(function(a,b){return-1!==f.indexOf(b)}))})),a[c]=[e],a}}(),h=function(){return function(a,b,c){var d,e,f,g,h="string"==typeof c?c.indexOf("."):-1,i="string"==typeof c?c.lastIndexOf("."):-1,j=0!==h,k=c.length&&i!==c.length-1,l=0,m=a.length,n=[];for(("like"===b||"not like"===b)&&(j&&(c="^"+c),k&&(c+="$")),l;m>l;++l)if(e=a[l]){switch(b){case"==":d=e==c;break;case"===":d=e===c;break;case">":d=e>c;break;case"<":d=c>e;break;case">=":d=e>=c;break;case"<=":d=c>=e;break;case"!=":d=e!=c;break;case"!==":d=e!==c;break;case"like":g=new RegExp(c,"i"),d=g.test(e);break;case"not like":g=new RegExp(c,"i"),d=!g.test(e);break;default:d=!1}f=n.indexOf(l)>-1,d&&!f&&n.push(l)}return n}}(),i=function(){var a=function(a){var e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a,z=y.db,A=y.table,B=y.distinct,C=y.selects,D=y.where,E=C.length||1,F={},G={},H=function(){C=Object.keys(A),E=C.length,m=C[0]};for(p=0;E>p;++p)m=C[p],m=m.replace(/['"]/g,""),-1!==m.indexOf("(")&&(f=m.match(/^(\w+)\(([^\)]+)\)/),m=f[2],"*"===m&&H(),G[m]=f[1]),-1!==m.indexOf(" as ")&&(m=m.replace(/(^\w+)\sas\s\w+/,"$1")),"*"===m&&H(),n=A[m]||[],F[m]=n.filter(function(a){return null!==a}),i=A.indices();if(D){if(o=D.initial,u=D.or,s=D.and,i=h(A[o[0]],o[1],o[2]),u.length)for(p=0,E=u.length;E>p;++p)for(v=u[p],j=h(A[v[0]],v[1],v[2]),q=0,r=j.length;r>q;++q)w=j[q],-1===i.indexOf(w)&&i.push(w);if(s.length)for(p=0,E=s.length;E>p;++p)t=s[p],j=h(A[t[0]],t[1],t[2]),i=i.filter(function(a){return-1!==this.indexOf(a)}.bind(j));F=b(F,i)}B?(i=c(F[B]),k=b(F,i)):k=F;for(m in G)G.hasOwnProperty(m)&&(e=G[m],k=g(k,e,m));if(k=d(k),e&&(k=k[0]),z.dispatch)for(p=0,E=k.length;E>p;++p){l=k[p],w=i[p];for(x in l)l.hasOwnProperty(x)&&z.dispatch(A._event+"."+x+"."+w+".read",{value:l[x]})}return k},b=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&(a[c]=a[c].filter(function(a,c){return-1!==b.indexOf(c)}));return a},c=function(a){var b=[],c=[];return a.filter(function(a,d){return-1===b.indexOf(a)&&null!==a?(b.push(a),c.push(d),!0):void 0}),c},d=function(a){var b,c,d,e,f=[];for(b in a)if(a.hasOwnProperty(b))for(c=a[b],d=c.length,e=0;d>e;++e)f[e]||(f[e]={}),f[e][b]=c[e];return f};return a}(),j=function(){var a=function(a){this.selects=a};a.prototype={db:void 0,distinct:!1,selects:[],table:void 0,where:void 0};var b=function(a,b,c,d){this._queryObject=a,a.where={initial:[b,c,d],and:[],or:[]}};b.prototype={and:function(a,b,c){return this._queryObject.where.and.push([a,b,c]),this},or:function(a,b,c){return this._queryObject.where.or.push([a,b,c]),this},go:function(){return i(this._queryObject)},GO:function(){return i(this._queryObject)}};var c=function(a,c,d){return new b(this._queryObject,a,c,d)},d=function(a,b){this._queryObject=a,this._table=a.db[b],a.table=this._table},e=function(a){return new d(this._queryObject,a)};d.prototype={_table:void 0,where:function(){return c.apply(this,arguments)},WHERE:function(){return c.apply(this,arguments)},go:function(){return i(this._queryObject)},GO:function(){return i(this._queryObject)}};var f=function(b){var c=this._queryObject.db;return this._queryObject=new a([b]),this._queryObject.distinct=b,this._queryObject.db=c,this},g=function(b,c){return this._queryObject=new a(c||"*"),this._queryObject.db=b,this};return g.prototype={_queryObject:{},from:function(){return e.apply(this,arguments)},FROM:function(){return e.apply(this,arguments)},distinct:function(){return f.apply(this,arguments)},DISTINCT:function(){return f.apply(this,arguments)}},g}();return{Box:c,eventHub:d,lobro:e,request:a,temple:b,db:f}}();